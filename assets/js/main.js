//проверка на пробелы
function space(str){return str.trim()!="";}let allList=document.querySelector('ul');let allDoneList=document.querySelector('ul.done__list');//сохранение задач
function saveLocal(){let allTasks;let allTDone;if(allList.innerHTML){allTasks=allList.innerHTML;localStorage.setItem('allTasks',allTasks);}if(allDoneList.innerHTML){allDone=allDoneList.innerHTML;localStorage.setItem('allDone',allDone);}}if(localStorage.getItem('allTasks')){allList.innerHTML=localStorage.getItem('allTasks');}if(localStorage.getItem('allDone')){allDoneList.innerHTML=localStorage.getItem('allDone');}//очистить все списки
window.onkeydown=function(event){if(event.ctrlKey&&event.code==='KeyD'){event.preventDefault();localStorage.clear();window.location.reload();}};//создание новой задачи
const taskInput=document.getElementById('taskInput');function createTask(){const tasksList=document.getElementById('tasksList');const taskText=taskInput.value;if(space(taskText)){const newLi=document.createElement('li');newLi.classList.add('tasks__item');newLi.insertAdjacentHTML(`beforeend`,`<div class="tasks__box"></div>`);const textSpan=document.createElement('span');textSpan.classList.add('tasks__text');textSpan.innerText=taskText;newLi.append(textSpan);newLi.insertAdjacentHTML(`beforeend`,`
            <div class="tasks__edit"><img src="./assets/img/pen30.png" alt="Edit"></div>
            <div class="tasks__update"><img src="./assets/img/flag30.png" alt="Update"></div>
            <div class="tasks__del"><img src="./assets/img/trash30.png" alt="Delete"></div>`);tasksList.append(newLi);taskInput.value="";}else{alert('Enter task!');}saveLocal();}taskInput.onkeypress=function(e){if(e.key==='Enter'){createTask();}};taskInput.addEventListener('keyup',function(e){if(e.key==='Escape'){this.value="";}});addEventListener('click',function(e){//добавление новой задачи кнопкой
if(e.target.closest('#addBtn')){createTask();}//отметить елемент чекбокс
if(e.target.closest('.tasks__box')){e.target.closest('.tasks__box').classList.toggle('checked');}// отметить/убрать отметки со всех задач
const boxes=document.querySelectorAll('.tasks__box');if(e.target.closest('.controls__check-button')){if(boxes[0].classList.contains('checked')){for(let tList of boxes){tList.classList.remove('checked');}}else{for(let tList of boxes){tList.classList.add('checked');}}}//удалить задачу кнопкой
if(e.target.closest('.tasks__del')){e.target.closest('.tasks__item').remove();}//удалить все отмеченные задачи
if(e.target.closest('.controls__del-button')){for(let list of boxes){if(list.classList.contains('checked')){list.parentElement.remove();}}}// редактировать задачу
if(e.target.closest('.tasks__edit')){const editBtn=e.target.closest('.tasks__edit');let taskElement=editBtn.previousElementSibling;const editInput=document.createElement('input');editInput.classList.add('tasks__edit-input');editInput.classList.add('task-input');editInput.type='text';editBtn.previousElementSibling.outerHTML=editInput.outerHTML;editBtn.previousElementSibling.value=taskElement.innerHTML;editBtn.previousElementSibling.placeholder='Enter task';editBtn.classList.toggle('active');editBtn.nextElementSibling.classList.toggle('active');editBtn.previousElementSibling.focus();}// нажатие кнопки update
if(e.target.closest('.tasks__update')){updateTask(e.target.closest('.tasks__update').previousElementSibling.previousElementSibling);}saveLocal();});addEventListener('keypress',function(e){if(e.target.classList.contains('tasks__edit-input')&&e.key==='Enter'){updateTask(e.target);}});//сохранение изменений задачи
function updateTask(targets){const newTaskValue=targets.value;if(space(newTaskValue)){const newTask=document.createElement('span');targets.nextElementSibling.classList.toggle('active');targets.nextElementSibling.nextElementSibling.classList.toggle('active');newTask.classList.add('tasks__text');newTask.innerText=newTaskValue;targets.outerHTML=newTask.outerHTML;}else{return alert('Enter task');}saveLocal();}//перенести отмеченные задачи в выполненый список
const doneBtn=document.querySelector('.controls__done-button');doneBtn.onclick=function(){const tasksLi=document.querySelectorAll('.tasks__item');let newDoneList=Array.from(tasksLi).filter(function(item,index,array){return item.firstElementChild.classList.contains('checked');});let doneList=document.getElementById('doneList');for(let d of newDoneList){let node=document.createElement('li');node.className='done__item';node.appendChild(document.createElement('span'));if(d.children[1].tagName==='INPUT'){node.firstElementChild.innerHTML=d.children[1].value;}else{node.firstElementChild.innerHTML=d.children[1].innerHTML;}doneList.prepend(node);d.remove();}saveLocal();};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsic3BhY2UiLCJzdHIiLCJ0cmltIiwiYWxsTGlzdCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImFsbERvbmVMaXN0Iiwic2F2ZUxvY2FsIiwiYWxsVGFza3MiLCJhbGxURG9uZSIsImlubmVySFRNTCIsImxvY2FsU3RvcmFnZSIsInNldEl0ZW0iLCJhbGxEb25lIiwiZ2V0SXRlbSIsIndpbmRvdyIsIm9ua2V5ZG93biIsImV2ZW50IiwiY3RybEtleSIsImNvZGUiLCJwcmV2ZW50RGVmYXVsdCIsImNsZWFyIiwibG9jYXRpb24iLCJyZWxvYWQiLCJ0YXNrSW5wdXQiLCJnZXRFbGVtZW50QnlJZCIsImNyZWF0ZVRhc2siLCJ0YXNrc0xpc3QiLCJ0YXNrVGV4dCIsInZhbHVlIiwibmV3TGkiLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NMaXN0IiwiYWRkIiwiaW5zZXJ0QWRqYWNlbnRIVE1MIiwidGV4dFNwYW4iLCJpbm5lclRleHQiLCJhcHBlbmQiLCJhbGVydCIsIm9ua2V5cHJlc3MiLCJlIiwia2V5IiwiYWRkRXZlbnRMaXN0ZW5lciIsInRhcmdldCIsImNsb3Nlc3QiLCJ0b2dnbGUiLCJib3hlcyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJjb250YWlucyIsInRMaXN0IiwicmVtb3ZlIiwibGlzdCIsInBhcmVudEVsZW1lbnQiLCJlZGl0QnRuIiwidGFza0VsZW1lbnQiLCJwcmV2aW91c0VsZW1lbnRTaWJsaW5nIiwiZWRpdElucHV0IiwidHlwZSIsIm91dGVySFRNTCIsInBsYWNlaG9sZGVyIiwibmV4dEVsZW1lbnRTaWJsaW5nIiwiZm9jdXMiLCJ1cGRhdGVUYXNrIiwidGFyZ2V0cyIsIm5ld1Rhc2tWYWx1ZSIsIm5ld1Rhc2siLCJkb25lQnRuIiwib25jbGljayIsInRhc2tzTGkiLCJuZXdEb25lTGlzdCIsIkFycmF5IiwiZnJvbSIsImZpbHRlciIsIml0ZW0iLCJpbmRleCIsImFycmF5IiwiZmlyc3RFbGVtZW50Q2hpbGQiLCJkb25lTGlzdCIsImQiLCJub2RlIiwiY2xhc3NOYW1lIiwiYXBwZW5kQ2hpbGQiLCJjaGlsZHJlbiIsInRhZ05hbWUiLCJwcmVwZW5kIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBLFFBQVNBLENBQUFBLEtBQVQsQ0FBZ0JDLEdBQWhCLENBQXFCLENBQ25CLE1BQU9BLENBQUFBLEdBQUcsQ0FBQ0MsSUFBSixJQUFjLEVBQXJCLENBQ0QsQ0FFRCxHQUFJQyxDQUFBQSxPQUFPLENBQUdDLFFBQVEsQ0FBQ0MsYUFBVCxDQUF1QixJQUF2QixDQUFkLENBQ0EsR0FBSUMsQ0FBQUEsV0FBVyxDQUFHRixRQUFRLENBQUNDLGFBQVQsQ0FBdUIsZUFBdkIsQ0FBbEIsQ0FDQTtBQUNBLFFBQVNFLENBQUFBLFNBQVQsRUFBc0IsQ0FDcEIsR0FBSUMsQ0FBQUEsUUFBSixDQUNBLEdBQUlDLENBQUFBLFFBQUosQ0FDQSxHQUFJTixPQUFPLENBQUNPLFNBQVosQ0FBdUIsQ0FDckJGLFFBQVEsQ0FBR0wsT0FBTyxDQUFDTyxTQUFuQixDQUNBQyxZQUFZLENBQUNDLE9BQWIsQ0FBcUIsVUFBckIsQ0FBaUNKLFFBQWpDLEVBQ0QsQ0FDRCxHQUFJRixXQUFXLENBQUNJLFNBQWhCLENBQTJCLENBQ3pCRyxPQUFPLENBQUdQLFdBQVcsQ0FBQ0ksU0FBdEIsQ0FDQUMsWUFBWSxDQUFDQyxPQUFiLENBQXFCLFNBQXJCLENBQWdDQyxPQUFoQyxFQUNELENBQ0YsQ0FFRCxHQUFJRixZQUFZLENBQUNHLE9BQWIsQ0FBcUIsVUFBckIsQ0FBSixDQUFzQyxDQUNwQ1gsT0FBTyxDQUFDTyxTQUFSLENBQW9CQyxZQUFZLENBQUNHLE9BQWIsQ0FBcUIsVUFBckIsQ0FBcEIsQ0FDRCxDQUNELEdBQUlILFlBQVksQ0FBQ0csT0FBYixDQUFxQixTQUFyQixDQUFKLENBQXFDLENBQ25DUixXQUFXLENBQUNJLFNBQVosQ0FBd0JDLFlBQVksQ0FBQ0csT0FBYixDQUFxQixTQUFyQixDQUF4QixDQUNELENBRUQ7QUFDQUMsTUFBTSxDQUFDQyxT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VSxDQUFBQSxJQUFJLENBQUczRSxRQUFRLENBQUMyQixhQUFULENBQXVCLElBQXZCLENBQVgsQ0FDQWdELElBQUksQ0FBQ0MsU0FBTCxDQUFpQixZQUFqQixDQUNBRCxJQUFJLENBQUNFLFdBQUwsQ0FBaUI3RSxRQUFRLENBQUMyQixhQUFULENBQXVCLE1BQXZCLENBQWpCLEVBQ0EsR0FBSStDLENBQUMsQ0FBQ0ksUUFBRixDQUFXLENBQVgsRUFBY0MsT0FBZCxHQUEwQixPQUE5QixDQUF1QyxDQUNyQ0osSUFBSSxDQUFDSCxpQkFBTCxDQUF1QmxFLFNBQXZCLENBQW1Db0UsQ0FBQyxDQUFDSSxRQUFGLENBQVcsQ0FBWCxFQUFjckQsS0FBakQsQ0FDRCxDQUZELElBRU8sQ0FDTGtELElBQUksQ0FBQ0gsaUJBQUwsQ0FBdUJsRSxTQUF2QixDQUFtQ29FLENBQUMsQ0FBQ0ksUUFBRixDQUFXLENBQVgsRUFBY3hFLFNBQWpELENBQ0QsQ0FDRG1FLFFBQVEsQ0FBQ08sT0FBVCxDQUFpQkwsSUFBakIsRUFDQUQsQ0FBQyxDQUFDNUIsTUFBRixHQUNELENBQ0QzQyxTQUFTLEdBQ1YsQ0FuQkQiLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8v0L/RgNC+0LLQtdGA0LrQsCDQvdCwINC/0YDQvtCx0LXQu9GLXHJcbmZ1bmN0aW9uIHNwYWNlIChzdHIpIHtcclxuICByZXR1cm4gc3RyLnRyaW0oKSAhPSBcIlwiO1xyXG59XHJcblxyXG5sZXQgYWxsTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ3VsJyk7XHJcbmxldCBhbGxEb25lTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ3VsLmRvbmVfX2xpc3QnKTtcclxuLy/RgdC+0YXRgNCw0L3QtdC90LjQtSDQt9Cw0LTQsNGHXHJcbmZ1bmN0aW9uIHNhdmVMb2NhbCAoKSB7XHJcbiAgbGV0IGFsbFRhc2tzO1xyXG4gIGxldCBhbGxURG9uZTtcclxuICBpZiAoYWxsTGlzdC5pbm5lckhUTUwpIHtcclxuICAgIGFsbFRhc2tzID0gYWxsTGlzdC5pbm5lckhUTUw7XHJcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnYWxsVGFza3MnLCBhbGxUYXNrcylcclxuICB9XHJcbiAgaWYgKGFsbERvbmVMaXN0LmlubmVySFRNTCkge1xyXG4gICAgYWxsRG9uZSA9IGFsbERvbmVMaXN0LmlubmVySFRNTDtcclxuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdhbGxEb25lJywgYWxsRG9uZSlcclxuICB9XHJcbn1cclxuXHJcbmlmIChsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnYWxsVGFza3MnKSkge1xyXG4gIGFsbExpc3QuaW5uZXJIVE1MID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2FsbFRhc2tzJylcclxufVxyXG5pZiAobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2FsbERvbmUnKSkge1xyXG4gIGFsbERvbmVMaXN0LmlubmVySFRNTCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdhbGxEb25lJylcclxufVxyXG5cclxuLy/QvtGH0LjRgdGC0LjRgtGMINCy0YHQtSDRgdC/0LjRgdC60Lhcclxud2luZG93Lm9ua2V5ZG93biA9IGZ1bmN0aW9uIChldmVudCkge1xyXG4gIGlmIChldmVudC5jdHJsS2V5ICYmIGV2ZW50LmNvZGUgPT09ICdLZXlEJykge1xyXG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgIGxvY2FsU3RvcmFnZS5jbGVhcigpXHJcbiAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XHJcbiAgfVxyXG59XHJcbi8v0YHQvtC30LTQsNC90LjQtSDQvdC+0LLQvtC5INC30LDQtNCw0YfQuFxyXG5jb25zdCB0YXNrSW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGFza0lucHV0Jyk7XHJcbmZ1bmN0aW9uIGNyZWF0ZVRhc2sgKCkge1xyXG4gIGNvbnN0IHRhc2tzTGlzdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0YXNrc0xpc3QnKTtcclxuICBjb25zdCB0YXNrVGV4dCA9IHRhc2tJbnB1dC52YWx1ZTtcclxuICBpZiAoc3BhY2UodGFza1RleHQpKSAge1xyXG4gICAgY29uc3QgbmV3TGkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpO1xyXG4gICAgbmV3TGkuY2xhc3NMaXN0LmFkZCgndGFza3NfX2l0ZW0nKTtcclxuICAgIG5ld0xpLmluc2VydEFkamFjZW50SFRNTChgYmVmb3JlZW5kYCxcclxuICAgICAgYDxkaXYgY2xhc3M9XCJ0YXNrc19fYm94XCI+PC9kaXY+YClcclxuICAgIGNvbnN0IHRleHRTcGFuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xyXG4gICAgdGV4dFNwYW4uY2xhc3NMaXN0LmFkZCgndGFza3NfX3RleHQnKTtcclxuICAgIHRleHRTcGFuLmlubmVyVGV4dCA9IHRhc2tUZXh0O1xyXG4gICAgbmV3TGkuYXBwZW5kKHRleHRTcGFuKTtcclxuICAgIG5ld0xpLmluc2VydEFkamFjZW50SFRNTChgYmVmb3JlZW5kYCxcclxuICAgICAgYFxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwidGFza3NfX2VkaXRcIj48aW1nIHNyYz1cIi4vYXNzZXRzL2ltZy9wZW4zMC5wbmdcIiBhbHQ9XCJFZGl0XCI+PC9kaXY+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0YXNrc19fdXBkYXRlXCI+PGltZyBzcmM9XCIuL2Fzc2V0cy9pbWcvZmxhZzMwLnBuZ1wiIGFsdD1cIlVwZGF0ZVwiPjwvZGl2PlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwidGFza3NfX2RlbFwiPjxpbWcgc3JjPVwiLi9hc3NldHMvaW1nL3RyYXNoMzAucG5nXCIgYWx0PVwiRGVsZXRlXCI+PC9kaXY+YClcclxuICAgIHRhc2tzTGlzdC5hcHBlbmQobmV3TGkpO1xyXG4gICAgdGFza0lucHV0LnZhbHVlID0gXCJcIjtcclxuICB9XHJcbiAgZWxzZSB7XHJcbiAgICBhbGVydCgnRW50ZXIgdGFzayEnKTtcclxuICB9XHJcbiAgc2F2ZUxvY2FsKCk7XHJcbn1cclxuXHJcblxyXG50YXNrSW5wdXQub25rZXlwcmVzcyA9IGZ1bmN0aW9uIChlKSB7XHJcbiAgaWYgKGUua2V5ID09PSAnRW50ZXInKSB7XHJcbiAgICBjcmVhdGVUYXNrKCk7XHJcbiAgfVxyXG59XHJcblxyXG50YXNrSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCBmdW5jdGlvbiAoZSl7XHJcbiAgaWYgKGUua2V5ID09PSAnRXNjYXBlJykge1xyXG4gICAgdGhpcy52YWx1ZSA9IFwiXCI7XHJcbiAgfVxyXG59KVxyXG5cclxuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xyXG4gIC8v0LTQvtCx0LDQstC70LXQvdC40LUg0L3QvtCy0L7QuSDQt9Cw0LTQsNGH0Lgg0LrQvdC+0L/QutC+0LlcclxuICBpZiAoZS50YXJnZXQuY2xvc2VzdCgnI2FkZEJ0bicpKSB7XHJcbiAgICBjcmVhdGVUYXNrKCk7XHJcbiAgfVxyXG4gICAgLy/QvtGC0LzQtdGC0LjRgtGMINC10LvQtdC80LXQvdGCINGH0LXQutCx0L7QutGBXHJcbiAgaWYgKGUudGFyZ2V0LmNsb3Nlc3QoJy50YXNrc19fYm94JykpIHtcclxuICAgIGUudGFyZ2V0LmNsb3Nlc3QoJy50YXNrc19fYm94JykuY2xhc3NMaXN0LnRvZ2dsZSgnY2hlY2tlZCcpO1xyXG4gIH1cclxuIC8vINC+0YLQvNC10YLQuNGC0Ywv0YPQsdGA0LDRgtGMINC+0YLQvNC10YLQutC4INGB0L4g0LLRgdC10YUg0LfQsNC00LDRh1xyXG4gIGNvbnN0IGJveGVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnRhc2tzX19ib3gnKTtcclxuICBpZiAoZS50YXJnZXQuY2xvc2VzdCgnLmNvbnRyb2xzX19jaGVjay1idXR0b24nKSkge1xyXG4gICAgaWYgKGJveGVzWzBdLmNsYXNzTGlzdC5jb250YWlucygnY2hlY2tlZCcpKSB7XHJcbiAgICAgIGZvciAobGV0IHRMaXN0IG9mIGJveGVzKSB7XHJcbiAgICAgICAgdExpc3QuY2xhc3NMaXN0LnJlbW92ZSgnY2hlY2tlZCcpO1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBmb3IgKGxldCB0TGlzdCBvZiBib3hlcykge1xyXG4gICAgICAgIHRMaXN0LmNsYXNzTGlzdC5hZGQoJ2NoZWNrZWQnKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuICAgIC8v0YPQtNCw0LvQuNGC0Ywg0LfQsNC00LDRh9GDINC60L3QvtC/0LrQvtC5XHJcbiAgaWYgKGUudGFyZ2V0LmNsb3Nlc3QoJy50YXNrc19fZGVsJykpIHtcclxuICAgIGUudGFyZ2V0LmNsb3Nlc3QoJy50YXNrc19faXRlbScpLnJlbW92ZSgpO1xyXG4gIH1cclxuICAgIC8v0YPQtNCw0LvQuNGC0Ywg0LLRgdC1INC+0YLQvNC10YfQtdC90L3Ri9C1INC30LDQtNCw0YfQuFxyXG4gIGlmIChlLnRhcmdldC5jbG9zZXN0KCcuY29udHJvbHNfX2RlbC1idXR0b24nKSkge1xyXG4gICAgZm9yIChsZXQgbGlzdCBvZiBib3hlcykge1xyXG4gICAgICBpZiAobGlzdC5jbGFzc0xpc3QuY29udGFpbnMoJ2NoZWNrZWQnKSkge1xyXG4gICAgICAgIGxpc3QucGFyZW50RWxlbWVudC5yZW1vdmUoKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuICAvLyDRgNC10LTQsNC60YLQuNGA0L7QstCw0YLRjCDQt9Cw0LTQsNGH0YNcclxuICBpZiAoZS50YXJnZXQuY2xvc2VzdCgnLnRhc2tzX19lZGl0JykpIHtcclxuICAgIGNvbnN0IGVkaXRCdG4gPSBlLnRhcmdldC5jbG9zZXN0KCcudGFza3NfX2VkaXQnKTtcclxuICAgIGxldCB0YXNrRWxlbWVudCA9IGVkaXRCdG4ucHJldmlvdXNFbGVtZW50U2libGluZztcclxuICAgIGNvbnN0IGVkaXRJbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XHJcbiAgICBlZGl0SW5wdXQuY2xhc3NMaXN0LmFkZCgndGFza3NfX2VkaXQtaW5wdXQnKTtcclxuICAgIGVkaXRJbnB1dC5jbGFzc0xpc3QuYWRkKCd0YXNrLWlucHV0Jyk7XHJcbiAgICBlZGl0SW5wdXQudHlwZSA9ICd0ZXh0JztcclxuICAgIGVkaXRCdG4ucHJldmlvdXNFbGVtZW50U2libGluZy5vdXRlckhUTUwgPSBlZGl0SW5wdXQub3V0ZXJIVE1MO1xyXG4gICAgZWRpdEJ0bi5wcmV2aW91c0VsZW1lbnRTaWJsaW5nLnZhbHVlID0gdGFza0VsZW1lbnQuaW5uZXJIVE1MO1xyXG4gICAgZWRpdEJ0bi5wcmV2aW91c0VsZW1lbnRTaWJsaW5nLnBsYWNlaG9sZGVyID0gJ0VudGVyIHRhc2snO1xyXG4gICAgZWRpdEJ0bi5jbGFzc0xpc3QudG9nZ2xlKCdhY3RpdmUnKTtcclxuICAgIGVkaXRCdG4ubmV4dEVsZW1lbnRTaWJsaW5nLmNsYXNzTGlzdC50b2dnbGUoJ2FjdGl2ZScpO1xyXG4gICAgZWRpdEJ0bi5wcmV2aW91c0VsZW1lbnRTaWJsaW5nLmZvY3VzKCk7XHJcbiAgfVxyXG4gIC8vINC90LDQttCw0YLQuNC1INC60L3QvtC/0LrQuCB1cGRhdGVcclxuICBpZiAoZS50YXJnZXQuY2xvc2VzdCgnLnRhc2tzX191cGRhdGUnKSkge1xyXG4gICAgdXBkYXRlVGFzayhlLnRhcmdldC5jbG9zZXN0KCcudGFza3NfX3VwZGF0ZScpLnByZXZpb3VzRWxlbWVudFNpYmxpbmcucHJldmlvdXNFbGVtZW50U2libGluZylcclxuICB9XHJcbiAgc2F2ZUxvY2FsKCk7XHJcbn0pXHJcblxyXG5hZGRFdmVudExpc3RlbmVyKCdrZXlwcmVzcycsIGZ1bmN0aW9uIChlKSB7XHJcbiAgaWYgKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygndGFza3NfX2VkaXQtaW5wdXQnKSAgJiYgZS5rZXkgPT09ICdFbnRlcicpIHtcclxuICAgIHVwZGF0ZVRhc2soZS50YXJnZXQpXHJcbiAgfVxyXG59KVxyXG5cclxuIC8v0YHQvtGF0YDQsNC90LXQvdC40LUg0LjQt9C80LXQvdC10L3QuNC5INC30LDQtNCw0YfQuFxyXG5mdW5jdGlvbiB1cGRhdGVUYXNrICh0YXJnZXRzKSB7XHJcbiAgY29uc3QgbmV3VGFza1ZhbHVlID0gdGFyZ2V0cy52YWx1ZTtcclxuICBpZiAoc3BhY2UobmV3VGFza1ZhbHVlKSkge1xyXG4gICAgY29uc3QgbmV3VGFzayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcclxuICAgIHRhcmdldHMubmV4dEVsZW1lbnRTaWJsaW5nLmNsYXNzTGlzdC50b2dnbGUoJ2FjdGl2ZScpO1xyXG4gICAgdGFyZ2V0cy5uZXh0RWxlbWVudFNpYmxpbmcubmV4dEVsZW1lbnRTaWJsaW5nLmNsYXNzTGlzdC50b2dnbGUoJ2FjdGl2ZScpO1xyXG4gICAgbmV3VGFzay5jbGFzc0xpc3QuYWRkKCd0YXNrc19fdGV4dCcpO1xyXG4gICAgbmV3VGFzay5pbm5lclRleHQgPSBuZXdUYXNrVmFsdWU7XHJcbiAgICB0YXJnZXRzLm91dGVySFRNTCA9IG5ld1Rhc2sub3V0ZXJIVE1MO1xyXG4gIH0gZWxzZSB7XHJcbiAgICByZXR1cm4gYWxlcnQoJ0VudGVyIHRhc2snKTtcclxuICB9XHJcbiAgc2F2ZUxvY2FsKCk7XHJcbn1cclxuXHJcbi8v0L/QtdGA0LXQvdC10YHRgtC4INC+0YLQvNC10YfQtdC90L3Ri9C1INC30LDQtNCw0YfQuCDQsiDQstGL0L/QvtC70L3QtdC90YvQuSDRgdC/0LjRgdC+0LpcclxuY29uc3QgZG9uZUJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jb250cm9sc19fZG9uZS1idXR0b24nKTtcclxuZG9uZUJ0bi5vbmNsaWNrID0gZnVuY3Rpb24oKSB7XHJcbiAgY29uc3QgdGFza3NMaSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy50YXNrc19faXRlbScpO1xyXG4gIGxldCBuZXdEb25lTGlzdCA9IEFycmF5LmZyb20odGFza3NMaSkuZmlsdGVyKGZ1bmN0aW9uIChpdGVtLCBpbmRleCwgYXJyYXkpIHtcclxuICAgIHJldHVybiBpdGVtLmZpcnN0RWxlbWVudENoaWxkLmNsYXNzTGlzdC5jb250YWlucygnY2hlY2tlZCcpO1xyXG4gIH0pXHJcbiAgbGV0IGRvbmVMaXN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2RvbmVMaXN0Jyk7XHJcbiAgZm9yIChsZXQgZCBvZiBuZXdEb25lTGlzdCkge1xyXG4gICAgbGV0IG5vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpO1xyXG4gICAgbm9kZS5jbGFzc05hbWUgPSAnZG9uZV9faXRlbSc7XHJcbiAgICBub2RlLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKSk7XHJcbiAgICBpZiAoZC5jaGlsZHJlblsxXS50YWdOYW1lID09PSAnSU5QVVQnKSB7XHJcbiAgICAgIG5vZGUuZmlyc3RFbGVtZW50Q2hpbGQuaW5uZXJIVE1MID0gZC5jaGlsZHJlblsxXS52YWx1ZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIG5vZGUuZmlyc3RFbGVtZW50Q2hpbGQuaW5uZXJIVE1MID0gZC5jaGlsZHJlblsxXS5pbm5lckhUTUw7XHJcbiAgICB9XHJcbiAgICBkb25lTGlzdC5wcmVwZW5kKG5vZGUpO1xyXG4gICAgZC5yZW1vdmUoKTtcclxuICB9XHJcbiAgc2F2ZUxvY2FsKCk7XHJcbn1cclxuXHJcblxyXG4iXX0=
